  ‚óè Console
    console.log
      [dotenv@17.2.3] injecting env (1) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
      at _log (node_modules/dotenv/lib/main.js:142:11)
    console.log
      Attempting generation with model: gemini-2.5-flash-image
      at Object.generateImages (src/service/repositories/ListingRepository.ts:48:17)
    console.log
      Generating images with params: {
        lifestyle: 1,
        hero: 1,
        closeUps: undefined,
        flatLay: undefined,
        macro: undefined,
        contextual: undefined,
        themedEnvironment: undefined,
        model: 'gemini-2.5-flash-image',
        hasProductImage: true
      }
      at internalGenerateImages (src/service/repositories/ListingRepository.ts:130:13)
    console.log
--
  ‚óè Console
    console.error
      An update to TestComponent inside a test was not wrapped in act(...).
      When testing, code that causes React state updates should be wrapped into act(...):
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
      39 |     if (repository) {
      40 |       repository.getTemplates().then((response: { templates: ContextTemplate[] }) => {
    > 41 |         setTemplates(response.templates || []);
         |         ^
      42 |       });
      43 |       repository.getArchivedUploads().then((response: { images: string[] }) => {
      44 |         setArchivedUploads(response.images || []);
      at node_modules/react-dom/cjs/react-dom-client.development.js:18758:19
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
--
  ‚óè Console
    console.log
      Generation failed for model: gemini-2.5-flash-image Server Error (503): Service Unavailable
      at Object.generateListing (src/client/hooks/useListingGeneration.ts:79:17)
    console.log
      Generation failed for model: gemini-2.5-flash-image Something went wrong
      at Object.generateListing (src/client/hooks/useListingGeneration.ts:79:17)
    console.log
      Generation failed for model: gemini-2.5-flash-image Something went wrong
      at Object.generateListing (src/client/hooks/useListingGeneration.ts:79:17)
    console.log
      Generation failed for model: gemini-2.5-flash-image 503 Service Unavailable
      at Object.generateListing (src/client/hooks/useListingGeneration.ts:79:17)
    console.log
      Generation failed for model: gemini-2.5-flash-image Internal Server Error
      at Object.generateListing (src/client/hooks/useListingGeneration.ts:79:17)
 FAIL   client  src/client/test/ListingGenerationUI.test.tsx
  ‚óè Console
    console.error
      You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.
      177 |     });
      178 |
    > 179 |     render(<App />);
          |           ^
      180 |
      181 |     const errorElement = screen.getByTestId('generation-error');
      182 |     expect(errorElement).toBeInTheDocument();
      at checkControlledValueProps (node_modules/react-dom/cjs/react-dom-client.development.js:1425:21)
      at setInitialProperties (node_modules/react-dom/cjs/react-dom-client.development.js:20534:11)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:12662:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17777:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17658:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16504:11)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
--
  ‚óè Listing Generation UI ‚Ä∫ displays error message below the generate button
    TypeError: Cannot read properties of undefined (reading 'length')
      391 |           <CardContent className="p-2">
      392 |             <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-slate-700">
    > 393 |               {images.length === 0 ? (
          |                       ^
      394 |                 <div className="text-[10px] text-muted-foreground p-4 text-center w-full">
      395 |                   No archived uploads found
      396 |                 </div>
      at ArchivedUploads (src/client/App.tsx:393:23)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
--
  ‚óè Listing Generation UI ‚Ä∫ is disabled when no shots are selected
    TypeError: Cannot read properties of undefined (reading 'length')
      391 |           <CardContent className="p-2">
      392 |             <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-slate-700">
    > 393 |               {images.length === 0 ? (
          |                       ^
      394 |                 <div className="text-[10px] text-muted-foreground p-4 text-center w-full">
      395 |                   No archived uploads found
      396 |                 </div>
      at ArchivedUploads (src/client/App.tsx:393:23)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
--
  ‚óè Listing Generation UI ‚Ä∫ is enabled when at least one shot is selected and product image is uploaded
    TypeError: Cannot read properties of undefined (reading 'length')
      391 |           <CardContent className="p-2">
      392 |             <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-slate-700">
    > 393 |               {images.length === 0 ? (
          |                       ^
      394 |                 <div className="text-[10px] text-muted-foreground p-4 text-center w-full">
      395 |                   No archived uploads found
      396 |                 </div>
      at ArchivedUploads (src/client/App.tsx:393:23)
      at Object.react_stack_bottom_frame (node_modules/react-dom/cjs/react-dom-client.development.js:25904:20)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom-client.development.js:7662:22)
      at updateFunctionComponent (node_modules/react-dom/cjs/react-dom-client.development.js:10166:19)
      at beginWork (node_modules/react-dom/cjs/react-dom-client.development.js:11778:18)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17641:22)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16583:35)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
--
  ‚óè Console
    console.log
      [dotenv@17.2.3] injecting env (1) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
      at _log (node_modules/dotenv/lib/main.js:142:11)
    console.log
      Incoming request: POST /listings/generate
      at src/service/app.ts:19:11
    console.log
      Attempting generation with model: gemini-2.5-flash-image
      at Object.generateImages (src/service/repositories/ListingRepository.ts:48:17)
    console.log
      Generating images with params: {
        lifestyle: 4,
        hero: 0,
        closeUps: 0,
        flatLay: 0,
        macro: 0,
        contextual: 0,
        themedEnvironment: undefined,
        model: 'gemini-2.5-flash-image',
        hasProductImage: true
--
  ‚óè Console
    console.log
      [dotenv@17.2.3] injecting env (1) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
      at _log (node_modules/dotenv/lib/main.js:142:11)
    console.log
      Incoming request: POST /listings/generate
      at src/service/app.ts:19:11
    console.log
      Attempting generation with model: gemini-2.5-flash-image
      at Object.generateImages (src/service/repositories/ListingRepository.ts:48:17)
    console.log
      Generating images with params: {
        lifestyle: 1,
        hero: 0,
        closeUps: 0,
        flatLay: undefined,
        macro: undefined,
        contextual: undefined,
        themedEnvironment: undefined,
        model: 'gemini-2.5-flash-image',
        hasProductImage: true
--
  ‚óè Console
    console.log
      [dotenv@17.2.3] injecting env (1) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
      at _log (node_modules/dotenv/lib/main.js:142:11)
Test Suites: 1 failed, 6 passed, 7 total
Tests:       3 failed, 63 passed, 66 total
Snapshots:   0 total
Time:        51.12 s
Ran all test suites matching /src\/client\/hooks\/useListingGeneration.test.ts|src\/client\/hooks\/useProductUpload.test.ts|src\/client\/test\/ListingGenerationUI.test.tsx|src\/service\/repositories\/ListingRepository.test.ts|src\/service\/data\/GeminiImageGenerator.test.ts|src\/service\/test\/integration\/FourLifestyleShots.test.ts|src\/service\/test\/integration\/GeminiImageGenerator.test.ts/i in 2 projects.
error Command failed with exit code 1.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
